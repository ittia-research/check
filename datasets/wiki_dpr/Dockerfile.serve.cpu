FROM python:3.11-bookworm
RUN apt update && apt install python3 python3-pip git -y
RUN pip install --no-cache-dir colbert-ai[torch,faiss-cpu]
RUN pip install --no-cache-dir "numpy<2"

WORKDIR /app

CP prepare_files.py .
CP server.py .
CP start.sh .

CMD ['/app/start.sh']